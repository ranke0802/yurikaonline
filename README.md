# 🎮 Yurika Online (유리카 온라인)
> **Service Link:** [https://yurika-online.web.app/](https://yurika-online.web.app/)


**Yurika Online**은 HTML5 Canvas와 Firebase를 기반으로 구축된 최첨단 에이전트 기반 MMORPG입니다. 이 프로젝트는 현대적인 웹 기술을 사용하여 부드러운 멀티플레이어 경험과 화려한 마법 전투 시스템을 구현하는 것을 목표로 합니다.

현재 버전: **v0.00.15**

---

## 🚀 주요 기능

- **실시간 PvP 및 파티 시스템 (New)**: 적대 선언을 통한 대인전(PvP)과 파티 결성을 통한 협동 플레이(Exp/Gold 분배)를 지원합니다.
- **실시간 멀티플레이어**: Firebase Realtime Database를 통한 실시간 위치 동기화 및 전투 시스템.
- **다이내믹 전투 시스템**:
  - **체인 라이트닝**: 다수의 적을 연쇄 타격하는 광역 기술.
  - **매직 미사일**: 유도 성능을 가진 마법 투사체 (PvP 지원).
  - **파이어볼**: 강력한 폭발을 일으키는 광역 화염 마법 (PvP 지원).
  - **앱솔루트 베리어**: 어떠한 공격도 막아내는 절대 방어막 (시각 효과 동기화).
- **스마트 몬스터 AI**: 플레이어를 감지하고 추적하며, 그룹으로 협력하여 공격하는 지능형 AI 패턴.
- **퀘스트 & 보상**: 슬라임 처치 퀘스트와 대왕 슬라임 레이드를 통한 캐릭터 성장 시스템.
- **사용자 커스터마이징**: 구글 로그인을 통한 간편한 세션 유지 및 캐릭터 이름/스탯 커스터마이징.
- **자동 버전 관리**: 서버 버전 변경 시 클라이언트 자동 새로고침 및 무한 루프 방지 시스템.

---

## 🛠️ 기술 스택

- **Frontend**: Vanilla JavaScript (ES6+), HTML5 Canvas, CSS3
- **Backend/DB**: Firebase Authentication, Firebase Realtime Database
- **Build/Dev**: Live-server (PWA 지원)

---

## 📋 최신 업데이트 내역 (v0.00.15)

### 적대 시스템 및 동기화 개선 (v0.00.15)
- **적대 목록(Hostility List) 버그 수정**:
  - `canAttackTarget` 메서드의 무한 재귀 호출로 인해 게임이 중단되던 현상을 수정했습니다.
  - 적대 목록 UI에서 상대방 이름이 `[object Object]` 또는 `undefined`로 표시되던 문제를 해결했습니다.
  - 재접속 시에도 적대 목록 데이터가 정상적으로 유지되도록 데이터 구조와 저장 로직을 개선했습니다.
  - 자동 반격 시 데이터 구조 오류로 인해 발생하던 Firebase 저장 실패 문제를 해결했습니다.
- **캐릭터 사망 동기화 개선**:
  - 플레이어가 사망했을 때 즉각적인 네트워크 동기화를 수행하여, 상대방 화면에서도 즉시 비석(Tombstone)으로 변하도록 개선했습니다.

### 시스템 안정화 및 AI 개선 (v0.00.14)
- **몬스터 AI 최적화**: 
  - 몬스터가 화면 밖에 있더라도 호스트 플레이어의 월드에서는 AI 연산과 이동이 정상적으로 진행되도록 초기화 로직을 개선했습니다.
  - 호스트 판정 주기를 매 초 단위로 강화하여 1인 플레이 및 호스트 전환 시의 안정성을 높였습니다.
- **데이터 지속성(Persistence) 강화**:
  - 캐릭터 선택 후 월드 진입 시 퀘스트 데이터가 누락되거나 초기화되는 현상을 방지하기 위해 프로필 데이터 구조를 보강했습니다.
  - 경험치와 퀘스트 진행도가 저장될 때의 유효성 검사 및 로그 시스템을 강화했습니다.
- **부활 시스템 수정**:
  - 사망 후 '재도전' 버튼 클릭 시 발생하던 `TypeError`를 해결하고 부활 로직을 통합했습니다.
  - 부활 시 즉각적인 네트워크 동기화를 통해 다른 플레이어에게 보이는 묘비 이펙트가 즉시 사라지도록 개선했습니다.
- **네트워크 최적화**: Realtime DB 사용량 관리를 위해 몬스터 위치 동기화 주기를 기존의 안정적인 2초 주기로 유지하며 효율성을 높였습니다.

### 파티 및 PvP 시스템 (v0.00.14)
- **PvP 시스템**: 
  - `/e [닉네임]` 명령어로 적대 선언 가능.
  - 피격 시 자동으로 상대를 적대 목록에 추가하는 자동 반격 시스템 탑재.
  - 적대 관계가 아닌 경우 광역 피해를 입지 않도록 안전장치 적용.
  - 우측 적대 패널을 통해 적 목록 확인 및 관리 가능.
- **파티 시스템**:
  - `/p [닉네임]` 명령어로 파티 초대 및 수락/거절 모달 구현.
  - 좌측 파티 패널에 파티원 상태(HP) 실시간 표시.
  - 파티 결성 시 적대 관계 자동 해제.
  - **보상 공유**: 획득한 경험치와 골드를 파티원 수만큼 균등 분배(1/N).

### 버그 수정 및 안정화 (v0.00.13)
- **에셋 로딩 버그 수정**: 네트워크 속도 이슈로 일부 몬스터가 투명하게 보이던 현상을 수정 (이미지 프리로드 및 에러 핸들링 강화).
- **서비스 워커 강화**: 배포 시 즉각적인 업데이트 반영을 위해 캐시 버전 관리 로직을 고도화했습니다.

### PvP 및 스킬 동기화 (v0.00.06)
- **PvP 타겟팅 시스템 구축**: `Projectile.js`를 전면 개편하여 몬스터뿐만 아니라 플레이어 간 전투(PvP)를 완벽하게 지원합니다.
  - **매직 미사일**: 상대 플레이어를 인식하여 자동으로 유도됩니다.
  - **파이어볼**: 상대 플레이어에게 적중 시 정상적으로 폭발 및 피격 이펙트가 발생합니다.
  - **앱솔루트 베리어**: 상대방 화면에서도 방어막 이펙트가 피격 전까지 영구적으로 표시되도록 개선되었습니다.
- **자폭 방지**: 투사체에 `ownerId`를 부여하여 자신이 쏜 마법에 자신이 피격되는 현상을 방지했습니다.

### 시스템 안정성 (v0.00.04)
- **버전 체크 시스템 근본 개선**: `version.txt`를 단일 진실 공급원(SSOT)으로 사용하도록 변경했습니다.
- **무한 리로드 방지**: `localStorage`와 `sessionStorage`를 활용하여 버전 불일치로 인한 무한 새로고침 루프를 원천 차단했습니다.

### 게임 밸런스 및 UI (v0.00.01 ~ v0.00.03)
- **몬스터 스폰 밸런스**: 몬스터 최대 개체 수를 15마리로 늘리고, 리스폰 시간을 3초로 단축하여 전투 템포를 높였습니다.
- **UI 개선**: 우측 하단에 현재 버전을 실시간으로 표시하며, 스테이터스 창에 구글 연동 버튼을 추가했습니다.
- **개발자 도구**: UID 조회를 위한 검색 기능을 추가하여 운영 편의성을 높였습니다.

---

## 🕹️ 시작하기

1. 저장소를 클론합니다.
2. `npm start` 명령어로 로컬 서버를 실행합니다.
3. 브라우저가 자동으로 열리지 않는다면 `http://localhost:8080` (또는 8081)에 접속하여 게임을 즐기세요!

---

## ⚖️ 저작권 및 라이선스

© 2026 Yurika Online. All rights reserved.
이 프로젝트는 개인 개발용이며 imc git에는 커밋하지 않습니다.
