# 🎮 Yurika Online (유리카 온라인) - v0.21.0 (Splitting & Optimization)

[**🎮 Firebase 라이브 데모 (v0.21.0)**](https://yurika-online.web.app/)

## 📜 v0.21.0 - 슬라임 분열 메커니즘 정밀화 (2026-01-25)
- **Splitting Refinement**: 대왕 슬라임 및 분열된 슬라임의 생성 개수를 하향 조정하여 게임 밸런스와 네트워크 부하를 동시에 최적화했습니다. (3마리/2마리)
- **Spawn Location Fix**: 분열된 개체들이 맵 전체로 퍼지지 않고 부모의 사망 위치 주변(반경 100px)에 자연스럽게 생성되도록 버그를 수정했습니다.

## 📜 v0.20.1 - Firebase 대역폭 최적화 및 밸런스 조정 (2026-01-25)
- **Bandwidth Emergency Fix**: 몬스터 이동 동기화를 10Hz(100ms)로 제한하고 이동 감지 임계값을 8px로 상향하여 Firebase 데이터 소모량을 90% 이상 절감했습니다. (v0.20.1)
- **Monster Speed Nerf**: 슬라임의 이동 속도를 유저 요청에 맞춰 기본 수치(100px/s)로 하향 조정하여 컨트롤의 재미를 높였습니다.

## 📜 v0.19.1 - 개발자 도구 및 월드 데이터 동기화 강화 (2026-01-25)
- **World Reset**: 개발자 모드에서 '캐릭터 초기화' 시 Firebase 서버의 몬스터, 드랍 아이템, 데미지 로그를 일괄 제거하는 기능을 연동했습니다. (v0.19.0)
- **Local Sync**: 초기화 클릭 즉시 로컬 메모리의 개체들을 제거하여 즉각적인 피드백을 제공하고 동기화 오류를 방어했습니다. (v0.19.1)

## 📜 v0.18.8 - 전투 시각 피드백 표준화 및 브랜딩 (2026-01-25)
- **Floating Text**: 
    - 모든 수치에 '+/-' 접두사를 적용하고, HP(녹색), MP(파란색), 데미지(빨간색) 색상을 표준화했습니다. (v0.18.7)
    - 불필요한 HP/MP 텍스트 라벨을 제거하여 화면을 보다 깔끔하게 개선했습니다. (v0.18.8)
- **Chain Lightning Overload**: 데미지 공식을 '과부하 시스템'으로 개편하여 스킬 레벨에 따른 위력 체감을 강화하고, 일반 공격 시 마나 회복 피드백(+1)을 추가했습니다. (v0.18.2)
- **UI Branding**: 공격 버튼 및 스킬 아이콘을 전용 고해상도 에셋으로 교체하여 시각적 퀄리티를 높였습니다.
- **Balance Adjustment**: 슬라임의 이동 속도를 캐릭터 속도와 균형을 맞추어(120px/s) 전략적 무빙이 가능하도록 조정했습니다. (v0.18.9)

## 📜 v0.12 - UI 고도화 및 캐릭터 초상화 최적화 (2026-01-24)
- **Character Portraits**: 
    - 리소스 관리자에서 직접 크로마키를 제거한 **투명 초상화**를 생성하여 HP/MP 바 및 정보창에 적용했습니다.
    - 캐릭터 전신이 프레임 안에 최적화되어 보이도록 위치 및 크기 조절 로직을 추가했습니다.
- **Quest & Reward**: 
    - 슬라임 처치 시 퀘스트 카운트가 정상 누적되지 않던 시스템 오류를 수정했습니다.
    - 보상 수령 시 **결과 알림 모달(Reward Modal)**을 추가하여 보상 획득을 확실히 인지할 수 있게 했습니다.
- **Visual Improvements**: 몬스터 상태 아이콘 및 전기 스파크 연출을 대폭 개선하여 전투 가독성을 높였습니다.

## 📜 v0.17.1 - 전투 정밀화 및 퀘스트 UI 개편 (2026-01-24)
- **전투 시스템 개선**: 플레이어 방어력이 몬스터 공격력보다 높을 시 'Miss!' 피드백 고도화.
- **회복 시인성 강화**: 자동 체력/마나 회복 시 화면상에 수치 플로팅 텍스트 추가.
- **퀘스트 UI 대개편**: 수행 과제와 보상 정보를 두 개의 슬롯으로 분리하여 가독성 증대 및 클리어 시 제거 처리.
- **말풍선 시야 확보**: 캐릭터를 가리지 않도록 말풍선 위치 조정 (+20px).
- **성장 밸런스**: 레벨업 당 스탯 포인트 1개로 조정 및 스킬 강화 비용 지수 상승(300 * 2^n) 적용.
- **보스 분열 메커니즘**: 대왕 슬라임 처치 시 20마리 분열 및 추가 분열(2단계) 시스템 도입.

## 📜 v0.16 - 기본 공격 밸런스 및 시각 효과 최적화 (2026-01-24)
- **체인 라이트닝 사거리 조정**: 기본 공격의 사거리를 기존 700에서 400으로 하향 조정하여 전투의 긴장감을 높였습니다.
- **공격 피드백 개선**: 사거리 내에 적이 없을 때 번개 줄기 이펙트가 출력되지 않도록 수정했습니다. (마법진과 주변 스파크 효과는 유지되어 시전 상태를 확인할 수 있습니다.)

## 📜 v0.15.1 - 개발자 모드 로직 긴급 수정 (Hotfix) (2026-01-24)
- **ReferenceError 해결**: `MonsterManager.js`에서 잘못 참조된 변수명(`totalLevelSum` -> `this.totalLevelSum`)을 수정하여 게임이 멈추는 현상 해결.

## 📜 v0.15 - 개발자 모드 도입 및 대왕 슬라임 크기 최종 수정 (2026-01-24)
- **개발자 모드 추가**: 내 정보창 초상화 클릭 시 실시간 월드 통계(몬스터 수, 리젠 속도 등) 확인 가능.
- **캐릭터 초기화 기능**: 개발자 모드 활성화 시 캐릭터 정보를 태초의 상태로 되돌리는 초기화 버튼 제공.
- **대왕 슬라임 크기 정밀 수정**: 모든 클라이언트에서 동일하게 거대한 크기(320x320)로 보이도록 동기화 보강.
- **버전 일괄 관리**: `index.html`, `version.txt`, `README.md` 전수 동기화 시스템 적용.

## 📜 v0.14 - 몬스터 생태계 고도화 및 보스 비주얼 강화 (2026-01-24)
- **Combat Polish**: 
    - **넉백(Knockback)** 시스템 추가로 타격감을 개선했습니다.
    - 체인 라이트닝 사거리 상향(400 -> 700)으로 공격 안정성을 확보했습니다.
    - 일반 공격 시 플레이어 캐릭터에게도 전기 스파크 효과를 추가했습니다.
- **Death System**: 플레이어 사망 시 자동으로 부활하지 않고, **사망 모달** 및 **재도전 버튼**을 통해 수동 부활하도록 복구했습니다.
- **Bug Fix**: `Logger` 미정의, `applyKnockback` 함수 누락 등 치명적인 런타임 오류들을 모두 해결했습니다.

## 📜 v0.09 - 멀티플레이어 어그로 개선 (2026-01-23)

- **Multi-Target Aggro**: 몬스터가 호스트뿐만 아니라 **모든 접속자(게스트 포함) 중 가장 가까운 대상을 추격**하도록 AI 로직을 개선했습니다.
- **Bug Fix**: 2번째, 3번째 접속 유저가 몬스터에게 무시당하던 문제 해결.

## 📜 v0.08 - 싱글 플레이 호스트 권한 수정 (2026-01-23)
- **Host Logic Fix**: 혼자 접속 시 호스트 권한(Host Authority)을 강제로 부여하여 AI, 드랍, 퀘스트 로직 정상화 (Network Failsafe).
- **Network Stability**: `NetworkManager`의 호스트 선정 알고리즘 개선 및 연결 안정성 확보.
- **Optimization**: `MonsterManager` 불필요한 디버그 로그 제거 및 성능 최적화.
- **Quest System Fix**: `Player` 퀘스트 데이터 중복 초기화 문제 해결.

## 📜 v0.07 - 게임플레이 컨텐츠 확장 & 모바일 최적화 (2026-01-23)
- **모바일 품질 개선 (Mobile Quality)**
    - Canvas 이미지 스무딩(Image Smoothing) 비활성화로 픽셀 아트 선명도 극대화
    - CSS `image-rendering: pixelated` 적용
- **게임플레이 심화 (Gameplay Depth)**
    - **퀘스트 시스템(Quest System)**: 슬라임 10마리 처치 -> 대왕 슬라임 토벌 퀘스트 복구
    - **보스 몬스터(Boss Monster)**: 10킬시 대왕 슬라임 스폰 로직 구현
    - **어그로 시스템(Aggro)**: 몬스터가 플레이어를 인식하고 추격하며, 느낌표(!) 이모지 표시
- **UI 및 편의성 (UI/UX)**
    - 캐릭터 이름 표시 위치 상향 (+50px)
    - 프로필 이미지를 캐릭터 정면 스프라이트로 동기화
    - 퀘스트 현황판 및 보상 수령 UI 구현


## 🚀 v0.02 - 그래픽 시스템 복구 및 카메라 안정화 (2026-01-23)
리팩토링 과정에서 소실되었던 핵심 그래픽 요소들을 복구하고, 렌더링 파이프라인을 최적화했습니다.

- **캐릭터 애니메이션 복구 (Sprite Restoration)**
    - 기존의 단일 이미지 방식에서 **멀티 프레임 애니메이션(Walking/Attack)** 시스템으로 전환했습니다.
    - **크로마키(Chroma Key) 자동화**: `ResourceManager`에서 이미지 로딩 시 배경색(녹색)을 자동으로 감지하여 투명하게 처리합니다.
    - **동적 오토 크롭(Auto-Crop)**: 캐릭터의 실제 픽셀 영역만 계산하여 렌더링 효율을 높이고, 스프라이트 크기를 자동으로 최적화합니다.
- **카메라 시스템 재구축 (Camera System)**
    - `Camera.js` 모듈을 새로 구현하여 캐릭터 추적(Follow) 및 맵 경계 클램핑(Clamping) 기능을 적용했습니다.
    - 화면 크기 변경 시(Resize) 뷰포트가 자동으로 조정되도록 하여 모바일/PC 반응성을 확보했습니다.
- **배경 렌더링 개선 (Zone Rendering)**
    - 검은 배경 대신 타일형 **잔디 맵(Background Tiling)**을 적용하여 시각적 완성도를 높였습니다.
    - 월드 좌표계(World Space)와 화면 좌표계(Screen Space)의 변환 로직을 수정하여 배경이 정상적으로 스크롤되도록 고쳤습니다.

---

## 🏗️ v0.01 - 아키텍처 리팩토링 및 멀티플레이어 구현 (Phase 1~3)
기존 `main.js`의 거대했던 코드를 객체 지향적이고 유지보수 가능한 형태로 완전히 재설계했습니다.

### 1. 모듈형 아키텍처 (Architecture Refactoring)
- **Core 분리**: `GameLoop`, `InputManager`, `ResourceManager`, `EventEmitter` 등 핵심 엔진 로직을 독립 모듈로 분리했습니다.
- **Entity Component System**: `Entity` -> `Actor` -> `Player/Monster`로 이어지는 상속 구조를 설계하여 코드 재사용성을 높였습니다.
- **상태 관리**: 전역 변수 의존성을 제거하고, 각 매니저 클래스가 상태를 관리하도록 변경했습니다.

### 2. Firebase 기반 멀티플레이어 (Network & Backend)
- **Firebase Auth**: 구글 로그인 및 익명 로그인(Anonymous Auth)을 연동하여 사용자 계정 시스템을 구축했습니다.
- **Realtime Database (RTDB)**:
    - **실시간 좌표 동기화**: `NetworkManager`를 통해 플레이어의 이동(x, y, vx, vy)을 서버에 전송하고, 다른 플레이어들의 정보를 수신합니다.
    - **Dead Reckoning**: 네트워크 지연을 보정하기 위해 선형 보간(Linear Interpolation)과 추측 항법을 적용하여 끊김 없는 움직임을 구현했습니다.

### 3. PWA (Progressive Web App) 도입
- **Service Worker**: 오프라인 지원 및 캐싱 전략(Cache-first)을 적용하여 로딩 속도를 획기적으로 개선했습니다.
- **Web App Manifest**: 모바일 홈 화면에 앱처럼 설치할 수 있는 기능을 추가했습니다.

---

## 🔮 향후 로드맵 (Roadmap)

### Phase 4: 전투 및 콘텐츠 복구
- [ ] **공격 동기화**: 다른 플레이어의 공격 모션 및 효과 동기화
- [ ] **몬스터 AI 복구**: 서버(혹은 호스트) 기반의 몬스터 스폰 및 동기화
- [ ] **채팅 시스템**: 실시간 대화 기능 구현

### Phase 5: 데이터 시스템
- [ ] **인벤토리 및 아이템**: DB 연동을 통한 영구적 아이템 저장
- [ ] **성장 시스템**: 경험치 및 레벨업 데이터 저장

---

*Developed by ranke0802 & Antigravity (Google Deepmind)*



